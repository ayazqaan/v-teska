<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title id="pageTitle">Viteska – Uygulamayı İndir</title>
<meta name="description" id="pageDesc" content="Viteska: Yakındaki oto hizmetlerini tek uygulamada. Android APK indir; iOS için Web App.">
<link rel="manifest" href="manifest.webmanifest">
<link rel="icon" href="assets/logo.png">
<meta name="theme-color" content="#ffffff">

<style>
  *{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)!important;outline:none!important}
  :root{ --primary:#f27405; --text:#121417; --muted:#6b7280; --line:#e5e7eb; }

  html,body{margin:0}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#fff;color:var(--text)}
  .wrap{max-width:1120px;margin:0 auto;padding:24px 16px 64px}

  /* header */
  .top{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:8px 0;border-bottom:1px solid var(--line)}
  .brand{display:flex;align-items:center;gap:12px}
  .brand img{width:36px;height:36px;border-radius:8px;object-fit:contain}
  .brand b{font-size:20px;letter-spacing:.2px}
  .ver{font-weight:700;color:#374151;background:#fff;border:1px solid var(--line);border-radius:999px;padding:8px 12px}

  /* hero */
  .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:28px;align-items:center;margin-top:22px}
  .h-title{font-size:34px;line-height:1.12;margin:10px 0 6px}
  .h-title .hl{color:var(--primary)}
  .muted{color:var(--muted)}
  .hero-img{width:100%;height:auto;border-radius:16px;border:1px solid var(--line);background:#fff;display:block}

  /* store badges (yan yana sabit) */
  .store-badges{display:grid;grid-template-columns:1fr 1fr;gap:12px;align-items:center;margin-top:14px}
  .store-badges a{display:block;line-height:0;border:1px solid var(--line);border-radius:12px;padding:6px 10px;background:#fff;transition:transform .06s ease;width:100%}
  .store-badges a:active{transform:translateY(1px)}
  .store-badges img{width:100%;height:auto;display:block}

  /* geniş web butonu */
  .wide-cta{margin-top:10px}
  .wide-cta a{
    display:block;width:100%;background:#fff;color:var(--primary);
    border:2px solid var(--primary);border-radius:14px;padding:14px 20px;
    text-align:center;font-weight:800;font-size:18px;box-shadow:0 2px 8px rgba(242,116,5,.08);
    transition:transform .06s ease, box-shadow .12s ease;text-decoration:none
  }
  .wide-cta a:active{transform:translateY(1px);box-shadow:0 1px 5px rgba(242,116,5,.12)}

  /* FEATURES — PC: 4 | Mobil: 2 */
  .features{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:28px}
  @media (max-width:980px){ .hero{grid-template-columns:1fr} .features{grid-template-columns:repeat(2,1fr)} }
  .card{background:#fff;border:1px solid var(--line);border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
  .card img{width:100%;height:160px;object-fit:cover;display:block}
  .card .inner{padding:14px}
  .tag{display:inline-block;font-weight:700;border-radius:999px;padding:6px 10px;border:1px solid var(--line);background:#fff;margin-bottom:8px;color:#111}
  .card h3{margin:4px 0 6px}
  .card p{margin:0;color:var(--muted)}

  /* EKRAN GÖRÜNTÜLERİ BÖLÜMÜ */
  .screens{margin-top:34px}
  .screens h2{margin:0 0 12px; text-align:center; color:var(--primary);}
  .ss-wrap{overflow:hidden;position:relative}
  .ss-track{display:flex;transition:transform .44s cubic-bezier(.35,1,.6,1);will-change:transform}
  .ss-slide{flex:0 0 100%;padding:6px}
  .ss-slide img{width:100%;height:auto;border-radius:14px;border:1px solid var(--line);display:block;object-fit:cover}
  .ss-dots{display:flex;justify-content:center;gap:10px;margin:12px 0 2px}
  .ss-dot{width:10px;height:10px;border-radius:50%;background:#e6e6e6;box-shadow:0 1px 4px rgba(0,0,0,.08);transition:background .22s}
  .ss-dot.active{background:var(--primary);box-shadow:0 2px 8px rgba(242,116,5,.3)}

  /* PC'de 5'li grid, dots yine görünür (isteğe bağlı gizleyebilirsin) */
  @media (min-width:900px){
    .ss-track{transform:none!important;display:grid;grid-template-columns:repeat(5,1fr);gap:14px}
    .ss-slide{flex:none;padding:0}
  }

  /* info blocks */
  .info{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:28px}
  .box{border:1px solid var(--line);border-radius:16px;padding:16px;background:#fff}
  .box h3{margin:4px 0 6px}
  .steps{margin:8px 0 0 18px}
  .steps li{margin:6px 0}
  @media(max-width:980px){.info{grid-template-columns:1fr}}

  /* footer */
  .footer{margin-top:36px;padding-top:16px;border-top:1px solid var(--line);color:#6b7280;font-size:13px;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}
</style>
</head>
<body>
<div class="wrap">
  <!-- Header -->
  <header class="top">
    <div class="brand">
      <img src="https://pbs.twimg.com/media/GtdpnsJWMAAicbp?format=jpg&name=medium" alt="Viteska Logo">
      <b id="brandTitle">Viteska</b>
    </div>
    <div class="ver" id="versionBadge">Sürüm: 2.0</div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div>
      <h1 class="h-title">Araç Dünyası <span class="hl">Viteska</span> ile Seninle</h1>
      <p class="muted" id="heroDesc">
        Viteska, araç sahiplerinin tüm ihtiyaçlarını tek çatı altında toplayan kapsamlı bir platformdur.
        Bakım takibi, masraf yönetimi, sigorta hatırlatmaları ve ilan sistemi gibi özellikleriyle aracınızı yönetmeyi kolaylaştırır, size zaman kazandırır.
      </p>
      <div class="store-badges">
        <a id="playBadge" href="#" target="_blank" rel="noopener"><img src="https://cihanbuyukakkas.com/wp-content/uploads/2021/04/Google-Play-hemen-indir-button-logo-icon-transparan-PNG-gorseli_3.png" alt="Google Play"></a>
        <a id="pwaBadge" href="https://ayazqaan.github.io/v-teska/anasayfa.html"><img src="https://cihanbuyukakkas.com/wp-content/uploads/2021/04/App-Store-hemen-indir-button-logo-icon-transparan-PNG-gorseli_3.png" alt="iOS Web App"></a>
      </div>
      <div class="wide-cta"><a id="webBtn" href="https://ayazqaan.github.io/v-teska/anasayfa.html" target="_blank" rel="noopener">Web Sürümünü Aç</a></div>
    </div>
    <div><img class="hero-img" src="https://pbs.twimg.com/media/GwPwpq8XcAA6vui?format=jpg&name=large" alt="Viteska kapak"></div>
  </section>

  <!-- Özellikler: 8 kart -->
  <section class="features">
    <article class="card"><img src="https://i.ibb.co/LZb9PvQ/bakim.jpg" alt="Bakım Takibi"><div class="inner"><span class="tag">Takip</span><h3>Bakım Takibi</h3><p>Bakım kayıtlarını unutma, hatırlatmalar al.</p></div></article>
    <article class="card"><img src="https://i.ibb.co/4j5jtDJ/masraf.jpg" alt="Masraflarım"><div class="inner"><span class="tag">Bütçe</span><h3>Masraflarım</h3><p>Harcamalarını kaydet ve analiz et.</p></div></article>
    <article class="card"><img src="https://i.ibb.co/4RfB9gz/sigorta.jpg" alt="Sigortalar"><div class="inner"><span class="tag">Güvence</span><h3>Sigortalar</h3><p>Kasko & Trafik sigortalarını takip et.</p></div></article>
    <article class="card"><img src="https://i.ibb.co/QJzHHcK/harita.jpg" alt="Harita & Konum"><div class="inner"><span class="tag">Rota</span><h3>Harita & Konum</h3><p>Yakındaki hizmetleri bul.</p></div></article>
    <article class="card"><img src="https://i.ibb.co/XjcBqW7/ehliyet.jpg" alt="Ehliyet ve Cezalar"><div class="inner"><span class="tag">Bilgi</span><h3>Ehliyet & Cezalar</h3><p>Cezalar, ehliyet ve ilk yardım bilgileri.</p></div></article>
    <article class="card"><img src="https://pbs.twimg.com/media/G1hmwPFWkAApyAL?format=jpg&name=large" alt="Vasıtalar"><div class="inner"><span class="tag">Garaj</span><h3>Vasıtalar</h3><p>Kendi garajını oluştur.</p></div></article>
    <article class="card"><img src="https://i.ibb.co/w7w3TR7/magaza.jpg" alt="Viteska Mağaza"><div class="inner"><span class="tag">Alışveriş</span><h3>Viteska Mağaza</h3><p>Aksesuar ve parçaları satın al.</p></div></article>
    <article class="card"><img src="https://pbs.twimg.com/media/G1hph1XXYAAz3eq?format=jpg&name=medium" alt="Araç Karşılaştır"><div class="inner"><span class="tag">Karşılaştır</span><h3>Araç Karşılaştır</h3><p>Modelleri yan yana incele.</p></div></article>
  </section>

  <!-- Ekran Görüntüleri -->
  <section class="screens">
    <h2>Ekran Görüntüleri</h2>
    <div class="ss-wrap">
      <div class="ss-track" id="ssTrack"></div>
    </div>
    <div class="ss-dots" id="ssDots" aria-hidden="true"></div>
  </section>

  <!-- Yükleme Bilgileri -->
  <section class="info">
    <div class="box">
      <h3>Android yükleme</h3>
      <ol class="steps">
        <li>APK dosyasını indir ve aç.</li>
        <li>Ayarlar → Güvenlik → “Bilinmeyen kaynaklar” iznini aç.</li>
        <li>Kurulum sonrası Viteska’yı aç.</li>
      </ol>
      <div style="margin-top:12px"><a id="apkBtn" class="btn btn-outline" href="#" download>APK indir</a></div>
    </div>
    <div class="box">
      <h3>iOS’ta Web Uygulaması</h3>
      <ol class="steps">
        <li>Safari ile bu sayfayı aç.</li>
        <li>Paylaş menüsünden “Ana Ekrana Ekle”.</li>
        <li>İsmi “Viteska” olarak kaydet.</li>
      </ol>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div>© <span id="year"></span> Viteska</div>
    <div class="muted">Gizlilik • Kullanım Koşulları</div>
  </footer>
</div>

<script>
  // ====== Yapılandırma ======
  const PLAY_ID  = "viteska.novaura";
  const PLAY_URL = `https://play.google.com/store/apps/details?id=${PLAY_ID}&hl=tr&gl=tr`;
  const APK_URL  = "https://ayazqaan.github.io/harita/viteska.apk";
  const WEB_URL  = "https://ayazqaan.github.io/v-teska/anasayfa.html";

  // Yerel meta (CI/cron ile ürettiğin JSON) — varsa önce bunu dener
  const META_URL = "data/app_meta.json";

  // CORS dostu HTML okuma proxy (fallback) — Play sayfasını metin olarak verir
  // İstersen kendi proxy'ni koyabilirsin:
  const PLAY_PROXY = `https://r.jina.ai/http://play.google.com/store/apps/details?id=${PLAY_ID}&hl=tr&gl=tr`;

  document.getElementById("year").textContent = new Date().getFullYear();
  document.getElementById("playBadge").href = PLAY_URL;
  document.getElementById("webBtn").href  = WEB_URL;
  document.getElementById("apkBtn").href  = APK_URL;

  // PWA prompt (Android)
  let deferredPrompt=null;
  window.addEventListener("beforeinstallprompt",(e)=>{ e.preventDefault(); deferredPrompt=e; });
  document.getElementById("pwaBadge").addEventListener("click",(e)=>{
    e.preventDefault();
    if(deferredPrompt){ deferredPrompt.prompt(); deferredPrompt=null; }
    else { alert("iOS için: Safari → Paylaş → Ana Ekrana Ekle."); }
  });

  // ====== Ekran Görüntüleri: mobilde auto slider, PC'de 5'li grid ======
  const ssTrack = document.getElementById("ssTrack");
  const ssDots  = document.getElementById("ssDots");
  let   SS      = [];        // screenshot URL listesi
  let   ssIdx   = 0;         // slider index
  let   ssTimer = null;

  function isDesktop(){ return window.matchMedia("(min-width:900px)").matches; }

  function buildDots(n){
    ssDots.innerHTML = "";
    for(let i=0;i<n;i++){
      const d=document.createElement("div");
      d.className="ss-dot"+(i===0?" active":"");
      ssDots.appendChild(d);
    }
  }
  function setActiveDot(i){
    const base = SS.length;
    const real = ((i%base)+base)%base;
    [...ssDots.children].forEach((el,idx)=>el.classList.toggle("active", idx===real));
  }

  function buildSlides(urls){
    ssTrack.innerHTML = "";
    // Mobilde sonsuz akış için iki kez ekle; PC’de grid olduğu için fark etmez
    const all = [...urls, ...urls];
    for(const src of all){
      const d=document.createElement("div");
      d.className="ss-slide";
      d.innerHTML = `<img src="${src}" alt="Ekran görüntüsü">`;
      ssTrack.appendChild(d);
    }
    buildDots(urls.length);
    ssIdx = urls.length; // ortadan başla
    applyTransform(false);
  }

  function applyTransform(anim=true){
    if(isDesktop()){
      ssTrack.style.transition = "none";
      ssTrack.style.transform  = "none";
      return;
    }
    ssTrack.style.transition = anim ? "transform .44s cubic-bezier(.35,1,.6,1)" : "none";
    ssTrack.style.transform  = `translateX(${-ssIdx*100}%)`;
    setActiveDot(ssIdx);
  }

  function loopFix(){
    const base  = SS.length;
    const total = base*2;
    if(ssIdx >= total-1){ ssIdx = base-1; applyTransform(false); }
    if(ssIdx <= 0){       ssIdx = base;   applyTransform(false); }
  }

  function startAuto(){
    if(isDesktop()){ stopAuto(); setActiveDot(0); return; }
    stopAuto();
    ssTimer = setInterval(()=>{
      ssIdx++;
      applyTransform(true);
      setTimeout(loopFix, 470);
    }, 2800);
  }
  function stopAuto(){ if(ssTimer){ clearInterval(ssTimer); ssTimer=null; } }

  window.addEventListener("resize", ()=>{ applyTransform(false); startAuto(); });

  // ====== Kaynak getirme: 1) META_URL → 2) PLAY_PROXY pars et ======
  async function getScreenshots(){
    // 1) JSON meta (tercih edilen)
    try{
      const r = await fetch(META_URL,{cache:"no-store"});
      if(r.ok){
        const meta = await r.json();
        if(meta && Array.isArray(meta.screenshots) && meta.screenshots.length){
          return meta.screenshots.slice(0,5);
        }
      }
    }catch(_){}

    // 2) Play sayfasını HTML olarak çekip olası ekran görsellerini çıkar
    // r.jina.ai yanıtında <img ...> srcset'lerden .jpg/.webp adresleri yakalanır
    try{
      const html = await (await fetch(PLAY_PROXY,{cache:"no-store"})).text();
      // Görseller için kaba bir regex: webp/jpg büyük resimler
      const candidates = [...html.matchAll(/https:\/\/play-lh\.googleusercontent\.com\/[^\s"']+\.(?:webp|jpg)/g)].map(m=>m[0]);
      // Ekran görüntülerinde genelde aynı host kullanılıyor; tekrarları temizle
      const uniq = [...new Set(candidates)].slice(0,5);
      if(uniq.length) return uniq;
    }catch(_){}

    // 3) Yedek: boş dön
    return [];
  }

  (async function initScreens(){
    SS = await getScreenshots();
    if(!SS.length){
      // Yedek yer tutucu — istersen kaldır
      SS = [
        "https://play-lh.googleusercontent.com/SKoklW4HaPAQ3n2s3kfF5KUMduKUX9Yy86aQ8m_3hGD6WpKSckxPuDa3CRudC710EMEqWtKu4RIHzE2KqfI-kg=w2560-h1440-rw",
        "https://play-lh.googleusercontent.com/H3ZoMLSwAYlX1HAaXvJcgb7CTnHoSaKa1Rbvw2ReyIc87nhH1VV8JHjmzoitQAQTvAJUgcacEb2WSOaEEFAUkw=w2560-h1440-rw",
        "https://play-lh.googleusercontent.com/pMVIkiVqE_PN1K-I3OGhzSV0Sevpwuo1fo-1NidfXm9I5WUoV9taKbcceVRc3gGLjYwwtr_LRogJzpwJlUjs7A=w2560-h1440-rw",
        "https://play-lh.googleusercontent.com/Fqbu5H311amjXO6FvnCLdCCMILhc6qin0Dppqj2n-sOMMhbGadPyqVuVCRGOBTId92OCw8DBv2m_uBTQ6Fg5nw=w2560-h1440-rw",
        "https://play-lh.googleusercontent.com/av9IAFlDYHIiscI8-fCyxcI775K2_EHVz74iuw_mo-UngQWcaAw_y5uYvBLr9I8TChyOINPIvyeML3ocHfwZ=w2560-h1440-rw"
      ];
    }
    buildSlides(SS);
    startAuto();
  })();
</script>
</body>
</html>
